<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>í™˜ìœ¨ ì•Œë¦¬ë¯¸ (Hybrid)</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: #121212; color: white; text-align: center; padding: 20px; transition: background 0.3s; }
        
        /* ì•Œë¦¼ ê¹œë¹¡ì„ íš¨ê³¼ */
        .alert-bg { animation: flashRed 1s infinite; }
        @keyframes flashRed { 0% {background:#121212;} 50% {background:#d32f2f;} 100% {background:#121212;} }

        h1 { color: #4CAF50; margin-bottom: 5px; font-size: 1.2rem; }
        
        /* ë©”ì¸ ë°•ìŠ¤ */
        .rate-box { background: #1e1e1e; padding: 20px; border-radius: 15px; margin: 20px auto; max-width: 320px; border: 1px solid #333; position: relative; }
        #currentRate { font-size: 3.5rem; font-weight: bold; margin: 10px 0; letter-spacing: -1px; }
        
        /* ìƒìŠ¹í•˜ë½ ìƒ‰ìƒ */
        .up { color: #ff5252; }
        .down { color: #448aff; }

        /* ìƒíƒœ ë±ƒì§€ */
        .status-badge { font-size: 0.8rem; padding: 3px 8px; border-radius: 10px; background: #333; display: inline-block; margin-top: 5px;}
        .mode-live { color: #ff5252; border: 1px solid #ff5252; } /* ì‹¤ì‹œê°„ */
        .mode-safe { color: #4caf50; border: 1px solid #4caf50; } /* ì•ˆì • */

        .control-area { max-width: 350px; margin: 0 auto; margin-top: 20px;}
        input { padding: 12px; border-radius: 8px; border: none; font-size: 1.2rem; width: 100px; text-align: center; background: #333; color: white; margin-right: 5px; }
        button { padding: 12px 18px; border-radius: 8px; border: none; font-size: 1rem; cursor: pointer; font-weight: bold; }
        .btn-add { background: #2196F3; color: white; }
        .btn-perm { width: 100%; background: #4CAF50; color: white; margin-bottom: 15px; padding: 15px; }

        ul { list-style: none; padding: 0; margin-top: 20px; }
        li { background: #222; padding: 15px; margin-bottom: 8px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; }
        .del-btn { background: #ff5252; color: white; padding: 5px 10px; font-size: 0.8rem; }
    </style>
</head>
<body>

    <h1>USD/KRW í™˜ìœ¨</h1>

    <div class="rate-box">
        <div id="currentRate">Loading...</div>
        <div id="serverStatus" class="status-badge">ì—°ê²° ì¤‘...</div>
    </div>

    <div class="control-area">
        <button class="btn-perm" onclick="requestNoti()">ğŸ”” ì•Œë¦¼ ê¶Œí•œ ì¼œê¸° (í•„ìˆ˜)</button>

        <div>
            <input type="number" id="targetInput" placeholder="1480" inputmode="decimal">
            <button class="btn-add" onclick="addTarget()">ëª©í‘œ ì¶”ê°€</button>
        </div>

        <ul id="targetList"></ul>
    </div>

    <script>
        let targets = JSON.parse(localStorage
